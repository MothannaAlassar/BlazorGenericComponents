#pragma checksum "E:\SharedApps\GitHub\BlazorGenericComponents\Components\BaseComponent.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "44f6b5a1432b641274098e19c10ea9ea7a6b6f77"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorGenericComponents.Components
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using BlazorGenericComponents;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using BlazorGenericComponents.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "E:\SharedApps\GitHub\BlazorGenericComponents\_Imports.razor"
using BlazorGenericComponents.Helpers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\SharedApps\GitHub\BlazorGenericComponents\Components\BaseComponent.razor"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\SharedApps\GitHub\BlazorGenericComponents\Components\BaseComponent.razor"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
    public partial class BaseComponent : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<h3>BaseComponent</h3>");
        }
        #pragma warning restore 1998
#nullable restore
#line 10 "E:\SharedApps\GitHub\BlazorGenericComponents\Components\BaseComponent.razor"
       

    protected bool IsToastMessageVisible { get; set; } = true;
    protected Services.ILanguageService Tralnslate => languageService;
    protected string validationMessage { get; set; } = "";
    private string selectedLanguage;
    protected NavigationManager Navigation => navigationManager;
    protected string SelectedLanguage { get => selectedLanguage; }
    //here permession fields
    protected bool CanAdd { get; set; } = false;
    protected bool CanEdit { get; set; } = false;
    protected bool CanDelete { get; set; } = false;
    protected bool CanView { get; set; } = false;
    protected virtual string PageName { get; set; }
    protected Helpers.MessageType MessageType { get; set; } = Helpers.MessageType.Default;
   
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Load the selected language here using JS interop
            //Tralnslate = languageService;
            //CodingService = codingService;
            await LoadLanguage();
            StateHasChanged(); // Refresh the UI
        }
        // isLoading = false;
    }
    private async Task LoadLanguage()
    {
        var selectedLang = await languageService.GetSelectedLanguageAsync() ?? "en";
        selectedLanguage = selectedLang;
        await languageService.LoadLanguageFileAsync(selectedLang);
        // await LanguageService.SetSelectedLanguageAsync(selectedLanguage); // Save the selected language
    }
    protected void AddErrorLog(Exception ex)
    {
        loggerService.AddErrorLog(ex);
        validationMessage = ex?.Message + " ### " + ex?.InnerException?.Message;
        MessageType = MessageType.Error;
    }
    
    protected void NavigateToWithBaseUrl(string pageurl, bool forceLoad)
    {

        // Get the full URL
        var uri = navigationManager.ToAbsoluteUri(navigationManager.Uri);

        // Get the base URI (protocol + host)
        var baseUri = $"{uri.Scheme}://{uri.Host}";

        // Get the path (everything after the base URI)
        var path = uri.AbsolutePath.TrimStart('/');

        // Get the query string (if any)
        var queryString = uri.Query;

        var baseUrl = navigationManager.BaseUri.TrimEnd('/');
        var curnurl = navigationManager.Uri.TrimEnd('/');
        var returnurl = path;
        //if (string.IsNullOrEmpty(returnurl))
        //    returnurl = "";
        if (pageurl.StartsWith("/"))
            pageurl = pageurl.TrimStart('/');
        var lgiurl = $"{baseUrl}/{pageurl}";
        navigationManager.NavigateTo(lgiurl, forceLoad);
    }
    protected bool IsInRole(string roleName)
    {
        var rtv = HttpContextAccessor.HttpContext.User.IsInRole(roleName);
        return rtv;
    }

    protected bool IsAdimin => IsInRole("Admin");
    protected bool IsManager => IsInRole("Manager");
    protected bool IsAccountant => IsInRole("Accountant");
    protected DateTime GetSystemDate()
    {
        return DateTime.Now;
    }
    protected DateTime GetMinIntervalDate()
    {
        return DateTime.Now;
    }
   

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IHttpContextAccessor HttpContextAccessor { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager navigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Services.ILoggerService loggerService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Services.ILanguageService languageService { get; set; }
    }
}
#pragma warning restore 1591
